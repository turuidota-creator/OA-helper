(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2cf86167","chunk-e05d73d4","chunk-1a4145e5","chunk-45c530e8","chunk-64134c1b","chunk-26c9049b","chunk-7a1314cc","chunk-7b68a0c6","chunk-d62fa1f0"],{"00f2":function(e,t,s){"use strict";s("c70f")},"04fe":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return i}));var a=s("b775");function r(e){return Object(a["a"])({url:"/history/flow/list",method:"get",params:e})}function i(e){return Object(a["a"])({url:"/history/flow/detail",method:"get",params:e})}},"05b5":function(e,t,s){"use strict";s("9c3a")},"0c73":function(e,t,s){"use strict";s("48db")},"0d1b":function(e,t,s){"use strict";s.d(t,"d",(function(){return r})),s.d(t,"c",(function(){return i})),s.d(t,"a",(function(){return o})),s.d(t,"e",(function(){return n})),s.d(t,"b",(function(){return l}));var a=s("b775");function r(e){return Object(a["a"])({url:"/system/document/list",method:"get",params:e})}function i(e){return Object(a["a"])({url:"/system/document/"+e,method:"get"})}function o(e){return Object(a["a"])({url:"/system/document",method:"post",data:e})}function n(e){return Object(a["a"])({url:"/system/document",method:"put",data:e})}function l(e){return Object(a["a"])({url:"/system/document/"+e,method:"delete"})}},"14da":function(e,t,s){},"1df0":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container",on:{contextmenu:function(t){return t.preventDefault(),e.openContextMenu(t)}}},[s("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px",size:e.searchSize}},[s("el-form-item",{attrs:{label:"流程编号",prop:"processCode"}},[s("el-input",{attrs:{placeholder:"请输入流程编号",clearable:"",size:e.searchSize},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.queryParams.processCode,callback:function(t){e.$set(e.queryParams,"processCode",t)},expression:"queryParams.processCode"}})],1),s("el-form-item",{attrs:{label:"流程分类",prop:"category"}},[s("el-select",{attrs:{clearable:"",placeholder:"请选择",size:e.searchSize},on:{change:e.getProcessList},model:{value:e.queryParams.category,callback:function(t){e.$set(e.queryParams,"category",t)},expression:"queryParams.category"}},e._l(e.categoryOptions,(function(e){return s("el-option",{key:e.categoryId,attrs:{label:e.categoryName,value:e.code}})})),1)],1),s("el-form-item",{attrs:{label:"工作流",prop:"processKey"}},[s("el-select",{attrs:{clearable:"",placeholder:"请选择",size:e.searchSize},model:{value:e.queryParams.processKey,callback:function(t){e.$set(e.queryParams,"processKey",t)},expression:"queryParams.processKey"}},e._l(e.processOptions,(function(e){return s("el-option",{key:e.processKey,attrs:{label:e.processName,value:e.processKey}})})),1)],1),s("el-form-item",{attrs:{label:"开始日期",prop:"beginTime","label-width":"80px"}},[s("el-date-picker",{staticStyle:{width:"150px"},attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"接收时间",size:e.searchSize},model:{value:e.queryParams.beginTime,callback:function(t){e.$set(e.queryParams,"beginTime",t)},expression:"queryParams.beginTime"}})],1),s("el-form-item",{attrs:{label:"截止日期",prop:"endTime","label-width":"80px"}},[s("el-date-picker",{staticStyle:{width:"150px"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"接收时间",size:e.searchSize},on:{change:e.endTimeChanged},model:{value:e.queryParams.endTime,callback:function(t){e.$set(e.queryParams,"endTime",t)},expression:"queryParams.endTime"}})],1),s("el-form-item",{attrs:{label:"发起人",prop:"startUserName"}},[s("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入发起人"},on:{change:e.startUserChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.queryParams.startUserName,callback:function(t){e.$set(e.queryParams,"startUserName",t)},expression:"queryParams.startUserName"}},[s("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){e.perSelOpen=!0}},slot:"append"})],1)],1),s("el-form-item",[s("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),s("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),e.inTab?e._e():s("el-row",{staticClass:"mb8",attrs:{gutter:10}},[s("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tableRef",attrs:{border:"",data:e.todoList,"cell-class-name":e.uniformCellClass},on:{"selection-change":e.handleSelectionChange,"row-contextmenu":e.handleRowContextMenu}},[s("el-table-column",{attrs:{type:"selection",width:"55",align:"left"}}),s("el-table-column",{attrs:{label:"流程编号",align:"left",prop:"processCode",width:"260"}}),s("el-table-column",{attrs:{label:"流程标题",align:"left",prop:"processTitle"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{on:{click:function(s){return e.handleProcess(t.row)}}},[t.row.processTitle?s("label",{staticClass:"row-title title-cursor"},[e._v(e._s(t.row.processTitle))]):s("label",{staticClass:"row-title title-cursor"},[e._v(e._s(t.row.procDefName)+" - "+e._s(t.row.startUserName)+" - "+e._s(t.row.createTime.substring(0,10)))])])]}}])}),s("el-table-column",{attrs:{label:"任务节点",align:"left",prop:"taskName","show-overflow-tooltip":"",width:"240"}}),s("el-table-column",{attrs:{label:"流程发起人",align:"left",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("label",{staticClass:"row-title"},[e._v(e._s(t.row.startUserName))])]}}])}),s("el-table-column",{attrs:{label:"接收时间",align:"left",prop:"createTime",width:"160"}}),s("el-table-column",{attrs:{label:"流程状态",align:"left",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("dict-tag",{attrs:{options:e.dict.type.wf_process_status,value:t.row.processStatus}})]}}])})],1),e.todoList.length>0?s("div",{staticClass:"selection-bar"},[s("el-checkbox",{attrs:{indeterminate:e.isIndeterminate,label:"全选",size:"mini",border:""},on:{change:e.toggleSelection},model:{value:e.allRowsSelected,callback:function(t){e.allRowsSelected=t},expression:"allRowsSelected"}}),s("span",{directives:[{name:"show",rawName:"v-show",value:e.multipleSelection.length>0,expression:"multipleSelection.length > 0"}],staticClass:"selected-inline"},[e._v(" 已选中 "+e._s(e.multipleSelection.length)+" 个项目 ")])],1):e._e(),s("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),s("el-dialog",{attrs:{title:"选择人员",visible:e.perSelOpen,width:"70vw"},on:{"update:visible":function(t){e.perSelOpen=t}}},[s("person-selector",{ref:"PersonSelector",attrs:{isSingle:!0}}),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary",loading:e.buttonLoading},on:{click:e.personSelectorSave}},[e._v("确 定")]),s("el-button",{on:{click:function(t){e.perSelOpen=!1}}},[e._v("取 消")])],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.contextMenu.visible,expression:"contextMenu.visible"}],staticClass:"context-menu",style:{left:e.contextMenu.x+"px",top:e.contextMenu.y+"px"}},[s("div",{staticClass:"context-menu-header"},[e._v(" 批量操作 ")]),s("div",{staticClass:"context-menu-item",on:{click:e.batchSubmit}},[s("i",{staticClass:"el-icon-upload2"}),e._v("批量提交 ")]),s("div",{staticClass:"context-menu-item",on:{click:e.clearSelection}},[s("i",{staticClass:"el-icon-circle-close"}),e._v("取消已勾选 ")]),s("div",{staticClass:"context-menu-divider"}),s("div",{staticClass:"context-menu-item",on:{click:e.selectAllItems}},[s("i",{staticClass:"el-icon-check"}),e._v("全选所有项 ")]),s("div",{staticClass:"context-menu-divider"}),s("div",{staticClass:"context-menu-item",on:{click:e.refreshTable}},[s("i",{staticClass:"el-icon-refresh"}),e._v("刷新表格 ")])])],1)},r=[],i=s("5530"),o=(s("d81d"),s("14d9"),s("d3b7"),s("0643"),s("4e3e"),s("a573"),s("159b"),s("ca94")),n=s("fef2"),l=(s("96bd"),s("9a9d")),c={name:"Todo",dicts:["wf_process_status"],components:{},props:{inTab:{type:Boolean,default:!1}},data:function(){return{loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,categoryOptions:[],processOptions:[],todoList:[],title:"",open:!1,queryParams:{pageNum:1,pageSize:10,processCode:null,processKey:null,category:null,name:null,startUserName:null,startUserId:null,beginTime:void 0,endTime:void 0},form:{},rules:{},perSelOpen:!1,allRowsSelected:!1,isIndeterminate:!1,contextMenu:{visible:!1,x:0,y:0},multipleSelection:[],contextRow:null,buttonLoading:!1,perSelType:1,selectProcessInsId:void 0,selectTaskId:void 0,selectTaskName:void 0}},computed:{searchSize:function(){return this.inTab?"mini":"small"}},created:function(){},beforeRouteEnter:function(e,t,s){s((function(e){}))},methods:{initWithParams:function(e){var t=this;this.getCategoryList(),this.queryParams.category=e.categoryCode,this.queryParams.processKey=e.processKey,Object(o["n"])({category:this.queryParams.category,pageNum:1,pageSize:99999}).then((function(e){t.processOptions=e.data})),this.getList()},uniformCellClass:function(){return"uniform-cell"},getCategoryList:function(){var e=this;Object(n["f"])().then((function(t){return e.categoryOptions=t.data}))},getProcessList:function(){var e=this;this.queryParams.processKey="",Object(o["n"])({category:this.queryParams.category,pageNum:1,pageSize:99999}).then((function(t){e.processOptions=t.data}))},getList:function(){var e=this;this.loading=!0,Object(o["p"])(this.queryParams).then((function(t){e.todoList=t.rows,e.total=t.total,e.loading=!1}))},handleProcess:function(e){var t=e.procDefId.split(":")[0];this.$router.push({path:"/workflow/process/detail/"+e.procInsId,query:{taskId:e.taskId,processed:!0,procDefId:t,processCode:e.processCode}})},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,name:null,category:null,key:null,tenantId:null,deployTime:null,derivedFrom:null,derivedFromRoot:null,parentDeploymentId:null,engineVersion:null},this.resetForm("form")},endTimeChanged:function(e){e&&(this.queryParams.endTime="".concat(e," 23:59:59"))},startUserChange:function(){this.queryParams.startUserId=void 0},personSelectorSave:function(){var e=this.$refs["PersonSelector"].getSelectedNodes();if(void 0!==e){var t=e.userId,s=e.nickName;if(1===this.perSelType)this.queryParams.startUserName=s,this.queryParams.startUserId=t,this.perSelOpen=!1,this.handleQuery();else{var a=t,r=this.selectProcessInsId,i=this.selectTaskId,o="",n={copyUserIds:a,procInsId:r,taskId:i,taskName:o};this.submitForwardData(n),this.perSelOpen=!1}}},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.processOptions=[],this.queryParams.startUserId=null,this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length;var t=this.todoList.length;this.allRowsSelected=e.length===t,this.isIndeterminate=e.length>0&&e.length<t,this.multipleSelection=e},toggleSelection:function(e){this.$refs.tableRef.toggleAllSelection()},handleAdd:function(){this.reset(),this.open=!0,this.title="添加流程定义"},handleExport:function(){this.download("flowable/process/todoExport",Object(i["a"])({},this.queryParams),"wf_todo_process_".concat((new Date).getTime(),".xlsx"))},handleRowContextMenu:function(e,t,s){s.preventDefault(),this.contextRow=e,this.openContextMenu(s)},openContextMenu:function(e){this.contextMenu.visible=!0,this.contextMenu.x=e.clientX,this.contextMenu.y=e.clientY,document.addEventListener("click",this.closeContextMenu)},closeContextMenu:function(){this.contextMenu.visible=!1,this.contextRow=null,document.removeEventListener("click",this.closeContextMenu)},batchSubmit:function(){var e=this;0!==this.multipleSelection.length?this.$confirm("确定要批量提交选中的 ".concat(this.multipleSelection.length," 个项目吗？"),"批量提交确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then((function(){var t="",s="";e.multipleSelection.forEach((function(e){t+=e.taskId+",",s+=e.procInsId+","}));var a={taskIds:t,processInstanceIds:s};Object(l["a"])(a).then((function(t){e.$message({message:"成功提交 ".concat(e.multipleSelection.length," 个项目"),type:"success"}),e.handleQuery(),e.$refs.tableRef.clearSelection(),e.closeContextMenu()}))})).catch((function(){e.closeContextMenu()})):this.$message({message:"请先选择要提交的项目",type:"warning"})},clearSelection:function(){this.$refs.tableRef.clearSelection(),this.$message({message:"已取消所有勾选",type:"success"}),this.closeContextMenu()},selectAllItems:function(){this.$refs.tableRef.toggleAllSelection(),this.$message({message:"已全选所有项目",type:"success"}),this.closeContextMenu()},refreshTable:function(){this.getList(),this.$message({message:"表格已刷新",type:"success"}),this.closeContextMenu()},handleForward:function(e){this.selectProcessInsId=e.procInsId,this.selectTaskId=e.taskId,this.selectTaskName=e.procDefName,this.perSelType=2,this.perSelOpen=!0},submitForwardData:function(e){var t=this;this.buttonLoading=!0,Object(l["e"])(e).then((function(e){t.$modal.msgSuccess(e.msg),t.getList()})).finally((function(){t.buttonLoading=!1,t.perSelType=1}))}}},u=c,d=(s("bebd"),s("2877")),p=Object(d["a"])(u,a,r,!1,null,"739b63c4",null);t["default"]=p.exports},2396:function(e,t,s){"use strict";s("4f42")},2439:function(e,t,s){},"30ff":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return i})),s.d(t,"c",(function(){return o})),s.d(t,"d",(function(){return n}));var a=s("b775");function r(e){return Object(a["a"])({url:"/flowable/opinionRecord/list",method:"get",params:e})}function i(e){return Object(a["a"])({url:"/flowable/opinionRecord/"+e,method:"get"})}function o(e){return Object(a["a"])({url:"/flowable/opinionRecord/forward",method:"post",data:e})}function n(e){return Object(a["a"])({url:"/flowable/opinionRecord/update",method:"post",data:e})}},3392:function(e,t,s){"use strict";s("fa8c")},"349e":function(e,t,s){"use strict";s("6a48")},"411b":function(e,t,s){"use strict";s("14da")},"444a":function(e,t,s){},4556:function(e,t,s){"use strict";s("c4c5")},"48db":function(e,t,s){},"4b0d":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,size:"small",inline:!0,"label-width":"68px"}},[s("el-form-item",{attrs:{label:"流程编号",prop:"processCode"}},[s("el-input",{attrs:{placeholder:"请输入流程编号",clearable:"",size:e.searchSize},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.queryParams.processCode,callback:function(t){e.$set(e.queryParams,"processCode",t)},expression:"queryParams.processCode"}})],1),s("el-form-item",{attrs:{label:"流程标题",prop:"processTitle"}},[s("el-input",{attrs:{placeholder:"请输入流程标题",clearable:"",size:e.searchSize},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.queryParams.processTitle,callback:function(t){e.$set(e.queryParams,"processTitle",t)},expression:"queryParams.processTitle"}})],1),s("el-form-item",{attrs:{label:"流程分类",prop:"category"}},[s("el-select",{attrs:{placeholder:"请选择流程分类",clearable:"",size:e.searchSize},on:{change:e.getProcessList},model:{value:e.queryParams.category,callback:function(t){e.$set(e.queryParams,"category",t)},expression:"queryParams.category"}},e._l(e.categoryOptions,(function(e){return s("el-option",{key:e.categoryId,attrs:{label:e.categoryName,value:e.code}})})),1)],1),s("el-form-item",{attrs:{label:"工作流",prop:"processKey"}},[s("el-select",{attrs:{placeholder:"请选择工作流",clearable:"",size:e.searchSize},model:{value:e.queryParams.processKey,callback:function(t){e.$set(e.queryParams,"processKey",t)},expression:"queryParams.processKey"}},e._l(e.processOptions,(function(e){return s("el-option",{key:e.processKey,attrs:{label:e.processName,value:e.processKey}})})),1)],1),s("el-form-item",{attrs:{label:"状态",prop:"orderStatus"}},[s("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"状态",clearable:"",size:e.searchSize},on:{change:e.handleQuery},model:{value:e.queryParams.recordStatus,callback:function(t){e.$set(e.queryParams,"recordStatus",t)},expression:"queryParams.recordStatus"}},[s("el-option",{attrs:{value:"pending",label:"待提交"}}),s("el-option",{attrs:{value:"completed",label:"已完成"}})],1)],1),s("el-form-item",[s("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),s("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.opinionRecordList,border:""}},[s("el-table-column",{attrs:{label:"流程编号",align:"left",prop:"processCode",width:"260"}}),s("el-table-column",{attrs:{label:"流程标题",align:"left",prop:"processTitle"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{on:{click:function(s){return e.handleFlowRecord(t.row)}}},[t.row.processTitle?s("label",{staticClass:"row-title title-cursor"},[e._v(e._s(t.row.processTitle))]):s("label",{staticClass:"row-title title-cursor"},[e._v(e._s(t.row.procDefName)+" - "+e._s(t.row.startUserName)+" - "+e._s(t.row.processCreateTime.substring(0,10)))])])]}}])}),s("el-table-column",{attrs:{label:"状态",align:"left",prop:"recordStatus",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return["pending"===t.row.recordStatus?s("el-tag",[e._v("待提交")]):e._e(),"completed"===t.row.recordStatus?s("el-tag",{attrs:{type:"success"}},[e._v("已完成")]):e._e()]}}])}),s("el-table-column",{attrs:{label:"转发时间",align:"left",prop:"createTime",width:"160"}}),s("el-table-column",{attrs:{label:"完成时间",align:"left",prop:"endTime",width:"160"}})],1),s("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1)},r=[],i=(s("14d9"),s("30ff")),o=s("fef2"),n=s("ca94"),l={name:"Forward",props:{inTab:{type:Boolean,default:!1}},data:function(){return{loading:!0,showSearch:!0,total:0,opinionRecordList:[],queryParams:{pageNum:1,pageSize:10,processCode:void 0,processTitle:void 0,category:void 0,processKey:void 0,recordStatus:void 0},categoryOptions:[],processOptions:[]}},computed:{searchSize:function(){return this.inTab?"mini":"small"}},created:function(){},methods:{initWithParams:function(e){var t=this;this.getCategoryList(),this.queryParams.category=e.categoryCode,this.queryParams.processKey=e.processKey,Object(n["n"])({category:this.queryParams.category,pageNum:1,pageSize:99999}).then((function(e){t.processOptions=e.data})),this.getList()},getList:function(){var e=this;this.loading=!0,Object(i["b"])(this.queryParams).then((function(t){e.opinionRecordList=t.rows,e.total=t.total,e.loading=!1}))},getCategoryList:function(){var e=this;Object(o["f"])().then((function(t){return e.categoryOptions=t.data}))},getProcessList:function(){var e=this;this.queryParams.processKey="",Object(n["n"])({category:this.queryParams.category,pageNum:1,pageSize:99999}).then((function(t){e.processOptions=t.data}))},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.queryParams.recordStatus=void 0,this.resetForm("queryForm"),this.handleQuery()},handleFlowRecord:function(e){var t=e.modelId,s=e.recordId;this.$router.push({path:"/workflow/process/detail/"+e.processInstanceId,query:{processed:!1,procDefId:t,processCode:e.processCode,forwardId:s}})}}},c=l,u=(s("05b5"),s("2877")),d=Object(u["a"])(c,a,r,!1,null,"0e06722b",null);t["default"]=d.exports},"4f42":function(e,t,s){},5327:function(e,t,s){"use strict";s("444a")},"54f1":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"indexContainer",staticClass:"index-container"},[s("div",{ref:"indexContentScroll",staticClass:"index-content-scroll"},[s("div",{staticClass:"row-box-2"},[s("el-tabs",{on:{"tab-click":e.handleClickProcessTab},model:{value:e.activeProcessTab,callback:function(t){e.activeProcessTab=t},expression:"activeProcessTab"}},[s("el-tab-pane",{attrs:{label:"新建流程",name:"create",lazy:""}},[s("span",{attrs:{slot:"label"},slot:"label"},[s("i",{staticClass:"el-icon-plus"}),e._v(" 新建流程")]),s("div",{staticClass:"process-list-box"},[s("Begin",{ref:"beginRef"})],1)]),s("el-tab-pane",{attrs:{label:"待办任务",name:"second",lazy:""}},[s("span",{attrs:{slot:"label"},slot:"label"},[s("i",{staticClass:"el-icon-date"}),e._v(" 待办任务")]),s("div",{staticClass:"process-list-box"},[e.showTab?s("ProcessCenter",{ref:"todoRef",attrs:{"in-tab":!0,centerType:"todo"},on:{"switch-to-tab":e.handleSwitchToTab}}):e._e(),e.showTab?e._e():s("Todo",{ref:"todoListRef",attrs:{"in-tab":!0}})],1)]),s("el-tab-pane",{attrs:{label:"已办任务",name:"third",lazy:""}},[s("span",{attrs:{slot:"label"},slot:"label"},[s("i",{staticClass:"el-icon-date"}),e._v(" 已办任务")]),s("div",{staticClass:"process-list-box"},[e.showTab?s("ProcessCenter",{ref:"finishedRef",attrs:{"in-tab":!0,centerType:"finished"},on:{"switch-to-tab":e.handleSwitchToTab}}):e._e(),e.showTab?e._e():s("Finished",{ref:"finishedListRef",attrs:{"in-tab":!0}})],1)]),s("el-tab-pane",{attrs:{label:"我的请求",name:"first",lazy:""}},[s("span",{attrs:{slot:"label"},slot:"label"},[s("i",{staticClass:"el-icon-date"}),e._v(" 我的请求")]),s("div",{staticClass:"process-list-box"},[e.showTab?s("ProcessCenter",{ref:"ownRef",attrs:{"in-tab":!0,centerType:"own"},on:{"switch-to-tab":e.handleSwitchToTab}}):e._e(),e.showTab?e._e():s("Own",{ref:"ownListRef",attrs:{"in-tab":!0}})],1)]),s("el-tab-pane",{attrs:{label:"抄送我的",name:"fourth",lazy:""}},[s("span",{attrs:{slot:"label"},slot:"label"},[s("i",{staticClass:"el-icon-date"}),e._v(" 抄送我的")]),s("div",{staticClass:"process-list-box"},[e.showTab?s("ProcessCenter",{ref:"copyRef",attrs:{"in-tab":!0,centerType:"copy"},on:{"switch-to-tab":e.handleSwitchToTab}}):e._e(),e.showTab?e._e():s("Copy",{ref:"copyListRef",attrs:{"in-tab":!0}})],1)]),s("el-tab-pane",{attrs:{label:"转发我的",name:"forward",lazy:""}},[s("span",{attrs:{slot:"label"},slot:"label"},[s("i",{staticClass:"el-icon-position"}),e._v(" 转发我的")]),s("div",{staticClass:"process-list-box"},[e.showTab?s("ProcessCenter",{ref:"forwardRef",attrs:{"in-tab":!0,centerType:"forward"},on:{"switch-to-tab":e.handleSwitchToTab}}):e._e(),e.showTab?e._e():s("Forward",{ref:"forwardListRef",attrs:{"in-tab":!0}})],1)]),s("el-tab-pane",{attrs:{label:"历史流程",name:"history",lazy:""}},[s("span",{attrs:{slot:"label"},slot:"label"},[s("i",{staticClass:"el-icon-setting"}),e._v(" 历史流程")]),s("div",{staticClass:"process-list-box"},[s("History",{ref:"historyRef",attrs:{"in-tab":!0}})],1)])],1)],1),s("div",{staticClass:"row-box-3",staticStyle:{display:"none"}},[s("el-row",{attrs:{gutter:10}},[s("el-col",{attrs:{xs:24,sm:24,md:14,lg:14,xl:14}},[s("div",{staticClass:"process-box"},[s("div",{staticClass:"group-title"},[s("i",{staticClass:"el-icon-date"}),e._v(" 常用流程")]),e.dailyProcessList.length>0?s("div",{staticClass:"process-list-box"},e._l(e.dailyProcessList,(function(t,a){return s("div",{key:a,staticClass:"list-item-box",on:{click:function(s){return e.handleStart(t)}}},[s("i",{staticClass:"left-icon"}),s("div",{staticClass:"right-box"},[s("span",{staticClass:"name"},[e._v(e._s(t.processName))]),s("span",{staticClass:"type"},[e._v(e._s(t.categoryName))])])])})),0):s("div",{staticClass:"process-list-box no-data"},[e._v("暂无数据")])])]),s("el-col",{attrs:{xs:24,sm:24,md:10,lg:10,xl:10}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.showNoticeArea,expression:"showNoticeArea"}],staticClass:"file-box"},[s("div",{staticClass:"group-title"},[s("i",{staticClass:"el-icon-document"}),e._v(" 文档栏")]),s("el-tabs",{attrs:{"tab-position":"left"},on:{"tab-click":e.handleClickFileTypeTab},model:{value:e.activeFileType,callback:function(t){e.activeFileType=t},expression:"activeFileType"}},[s("el-tab-pane",{attrs:{label:"财务服务",name:"1"}},[e.documentList.length>0?s("div",{staticClass:"file-list-box"},e._l(e.documentList,(function(t,a){return s("div",{key:a,staticClass:"file-item-box"},[s("div",{staticClass:"file-title",on:{click:function(s){return e.previewFile(t.url?t.url:t.linkUrl)}}},[e._v(e._s(t.title)+e._s(t.subTitle?"-"+t.subTitle:""))]),s("div",{staticClass:"file-btn",on:{click:function(s){return e.downloadFile(t)}}},[e._v("下载")])])})),0):s("div",{staticClass:"file-list-box no-data"},[e._v("暂无数据")])]),s("el-tab-pane",{attrs:{label:"采购制度",name:"2"}},[e.documentList.length>0?s("div",{staticClass:"file-list-box"},e._l(e.documentList,(function(t,a){return s("div",{key:a,staticClass:"file-item-box"},[s("div",{staticClass:"file-title",on:{click:function(s){return e.previewFile(t.url?t.url:t.linkUrl)}}},[e._v(e._s(t.title)+e._s(t.subTitle?"-"+t.subTitle:""))]),s("div",{staticClass:"file-btn",on:{click:function(s){return e.downloadFile(t)}}},[e._v("下载")])])})),0):s("div",{staticClass:"file-list-box no-data"},[e._v("暂无数据")])]),s("el-tab-pane",{attrs:{label:"IT服务",name:"3"}},[e.documentList.length>0?s("div",{staticClass:"file-list-box"},e._l(e.documentList,(function(t){return s("div",{key:t.id,staticClass:"file-item-box"},[s("div",{staticClass:"file-title",on:{click:function(s){return e.previewFile(t.url?t.url:t.linkUrl)}}},[e._v(e._s(t.title)+e._s(t.subTitle?"-"+t.subTitle:""))]),s("div",{staticClass:"file-btn",on:{click:function(s){return e.downloadFile(t)}}},[e._v("下载")])])})),0):s("div",{staticClass:"file-list-box no-data"},[e._v("暂无数据")])]),s("el-tab-pane",{attrs:{label:"法律服务",name:"4"}},[e.documentList.length>0?s("div",{staticClass:"file-list-box"},e._l(e.documentList,(function(t){return s("div",{key:t.id,staticClass:"file-item-box"},[s("div",{staticClass:"file-title",on:{click:function(s){return e.previewFile(t.url?t.url:t.linkUrl)}}},[e._v(e._s(t.title)+e._s(t.subTitle?"-"+t.subTitle:""))]),s("div",{staticClass:"file-btn",on:{click:function(s){return e.downloadFile(t)}}},[e._v("下载")])])})),0):s("div",{staticClass:"file-list-box no-data"},[e._v("暂无数据")])]),s("el-tab-pane",{attrs:{label:"公共事务部",name:"5"}},[e.documentList.length>0?s("div",{staticClass:"file-list-box"},e._l(e.documentList,(function(t){return s("div",{key:t.id,staticClass:"file-item-box"},[s("div",{staticClass:"file-title",on:{click:function(s){return e.previewFile(t.url?t.url:t.linkUrl)}}},[e._v(e._s(t.title)+e._s(t.subTitle?"-"+t.subTitle:""))]),s("div",{staticClass:"file-btn",on:{click:function(s){return e.downloadFile(t)}}},[e._v("下载")])])})),0):s("div",{staticClass:"file-list-box no-data"},[e._v("暂无数据")])]),s("el-tab-pane",{attrs:{label:"HR业务栏",name:"6"}},[e.documentList.length>0?s("div",{staticClass:"file-list-box"},e._l(e.documentList,(function(t){return s("div",{key:t.id,staticClass:"file-item-box"},[s("div",{staticClass:"file-title",on:{click:function(s){return e.previewFile(t.url?t.url:t.linkUrl)}}},[e._v(e._s(t.title)+e._s(t.subTitle?"-"+t.subTitle:""))]),s("div",{staticClass:"file-btn",on:{click:function(s){return e.downloadFile(t)}}},[e._v("下载")])])})),0):s("div",{staticClass:"file-list-box no-data"},[e._v("暂无数据")])])],1)],1)]),e._e()],1)],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.showFixedHScrollBar,expression:"showFixedHScrollBar"}],ref:"fixedHScroll",staticClass:"fixed-horizontal-scroll"},[s("div",{staticClass:"fixed-scroll-spacer",style:{width:e.scrollContentWidth+"px"}})])])},r=[],i=(s("caad"),s("14d9"),s("b0c0"),s("d3b7"),s("2532"),s("0643"),s("4e3e"),s("159b"),s("ca94")),o=s("5c96"),n=s("8b29"),l=s("4360"),c=s("0d1b"),u=s("5f5e"),d=s("1df0"),p=s("cb3e"),h=s("fd90"),f=s("e2a3"),m=s("ff15"),y=s("686e"),b=s("4b0d"),v={name:"index_new",components:{Begin:u["default"],Todo:d["default"],Finished:p["default"],Own:h["default"],Copy:f["default"],Forward:b["default"],History:m["default"],ProcessCenter:y["default"]},data:function(){return{activeProcessTab:"second",dailyProcessList:[],noticeList:[],showNoticeArea:!0,documentList:[],activeFileType:"1",showFixedHScrollBar:!1,scrollContentWidth:0,syncingScroll:!1,showTab:!0}},created:function(){this.initActiveTabFromRoute()},mounted:function(){var e=this,t=l["a"].getters&&l["a"].getters.roles;t.includes("not_notice_view")&&(this.showNoticeArea=!1),this.getDailyList(),this.showNoticeArea&&this.getNoticeList(),this.showNoticeArea&&this.getDocumentList(),this.$nextTick((function(){e.initFixedHScrollBar(),e.fetchActiveTabList(),e.initHeaderResizeForActiveTab()})),window.addEventListener("resize",this.handleResize)},activated:function(){var e=this,t=l["a"].getters&&l["a"].getters.roles;t.includes("not_notice_view")&&(this.showNoticeArea=!1),this.initActiveTabFromRoute(),this.getDailyList(),this.showNoticeArea&&this.getNoticeList(),this.showNoticeArea&&this.getDocumentList(),this.$nextTick((function(){e.updateFixedHScrollWidth(),e.fetchActiveTabList(),e.initHeaderResizeForActiveTab()}))},watch:{$route:function(e){var t=this;this.showTab=!0;var s=e&&e.query&&e.query.tabName,a=["create","first","second","third","fourth","forward","history"];a.includes(s)&&this.activeProcessTab!==s&&(this.activeProcessTab=s||"second",this.$nextTick((function(){t.scrollToTop(),t.fetchActiveTabList(),t.initHeaderResizeForActiveTab()})))}},beforeDestroy:function(){var e=this.$refs.fixedHScroll,t=this.$refs.indexContentScroll;e&&e.removeEventListener("scroll",this.handleFixedScroll),t&&t.removeEventListener("scroll",this.handleContainerScroll),window.removeEventListener("resize",this.handleResize)},methods:{handleSwitchToTab:function(e,t){var s=this;this.showTab=!1,this.$nextTick((function(){"todo"==e&&s.$refs.todoListRef?s.$refs.todoListRef.initWithParams(t):"finished"==e&&s.$refs.finishedListRef?s.$refs.finishedListRef.initWithParams(t):"own"==e&&s.$refs.ownListRef?s.$refs.ownListRef.initWithParams(t):"copy"==e&&s.$refs.copyListRef?s.$refs.copyListRef.initWithParams(t):"forward"==e&&s.$refs.forwardListRef&&s.$refs.forwardListRef.initWithParams(t)}))},initActiveTabFromRoute:function(){var e=this.$route&&this.$route.query&&this.$route.query.tabName,t=["create","first","second","third","fourth","forward","history"];t.includes(e)&&(this.activeProcessTab=e)},handleResize:function(){this.updateFixedHScrollWidth()},getDocumentList:function(){var e=this;Object(c["d"])({pageNum:1,pageSize:100,type:this.activeFileType}).then((function(t){e.documentList=t.rows}))},getNoticeList:function(){var e=this;Object(n["d"])({pageNum:1,pageSize:20,noticeTitle:void 0,createBy:void 0,status:void 0}).then((function(t){e.noticeList=t.rows}))},getDailyList:function(){var e=this,t=o["Loading"].service({lock:!0,text:"加载中...",spinner:"el-icon-loading",background:"rgba(240, 243, 255, 0.7)"});Object(i["b"])({pageNum:1,pageSize:15}).then((function(s){e.dailyProcessList=s.rows,e.dailyProcessList.length>10&&(e.dailyProcessList.length=10),e.$nextTick((function(){t.close()}))}))},handleClickFileTypeTab:function(e){this.activeFileType=e.name,this.getDocumentList()},handleClickProcessTab:function(e){var t=this;this.showTab=!0,this.activeProcessTab=e.name,this.$nextTick((function(){t.fetchActiveTabList(),t.initHeaderResizeForActiveTab()}))},fetchActiveTabList:function(){var e,t;if("first"===this.activeProcessTab)null===(e=this.$refs.ownRef)||void 0===e||null===(t=e.getCategoryList)||void 0===t||t.call(e);else if("second"===this.activeProcessTab){var s,a;null===(s=this.$refs.todoRef)||void 0===s||null===(a=s.getCategoryList)||void 0===a||a.call(s)}else if("third"===this.activeProcessTab){var r,i;null===(r=this.$refs.finishedRef)||void 0===r||null===(i=r.getCategoryList)||void 0===i||i.call(r)}else if("fourth"===this.activeProcessTab){var o,n;null===(o=this.$refs.copyRef)||void 0===o||null===(n=o.getCategoryList)||void 0===n||n.call(o)}else if("create"===this.activeProcessTab){var l,c;null===(l=this.$refs.beginRef)||void 0===l||null===(c=l.getList)||void 0===c||c.call(l)}else if("forward"===this.activeProcessTab){var u,d;null===(u=this.$refs.forwardRef)||void 0===u||null===(d=u.getCategoryList)||void 0===d||d.call(u)}else if("history"===this.activeProcessTab){var p,h;null===(p=this.$refs.historyRef)||void 0===p||null===(p=p.$refs)||void 0===p||null===(p=p.oaFlow)||void 0===p||null===(h=p.init)||void 0===h||h.call(p)}},handleStart:function(e){this.$router.push({path:"/workflow/process/start/"+e.deploymentId,query:{definitionId:e.definitionId}})},previewFile:function(e){window.open(e,"_blank")},downloadFile:function(e){var t=document.createElement("a");t.href=e.url?e.url:e.linkUrl,t.download=e.title,document.body.appendChild(t),t.click(),document.body.removeChild(t)},initFixedHScrollBar:function(){var e=this.$refs.fixedHScroll,t=this.$refs.indexContentScroll;e&&t&&(this.updateFixedHScrollWidth(),e.addEventListener("scroll",this.handleFixedScroll,{passive:!0}),t.addEventListener("scroll",this.handleContainerScroll,{passive:!0}))},updateFixedHScrollWidth:function(){var e=this;this.$nextTick((function(){var t=e.$refs.indexContentScroll,s=e.$refs.fixedHScroll;if(t&&s){var a=t.scrollWidth,r=document.documentElement.clientWidth;e.scrollContentWidth=Math.max(a,r),e.showFixedHScrollBar=a>r,s.scrollLeft=t.scrollLeft}}))},handleFixedScroll:function(e){if(!this.syncingScroll){this.syncingScroll=!0;var t=e.target.scrollLeft,s=this.$refs.indexContentScroll;s&&(s.scrollLeft=t),this.syncingScroll=!1}},handleContainerScroll:function(e){if(!this.syncingScroll){this.syncingScroll=!0;var t=e.target.scrollLeft,s=this.$refs.fixedHScroll;s&&(s.scrollLeft=t),this.syncingScroll=!1}},initHeaderResizeForActiveTab:function(){var e=this,t=null;"second"===this.activeProcessTab?t=this.$refs.todoRef:"third"===this.activeProcessTab?t=this.$refs.finishedRef:"first"===this.activeProcessTab?t=this.$refs.ownRef:"fourth"===this.activeProcessTab?t=this.$refs.copyRef:"create"===this.activeProcessTab?t=this.$refs.beginRef:"history"===this.activeProcessTab?t=this.$refs.historyRef:"forward"===this.activeProcessTab&&(t=this.$refs.forwardRef),t&&this.$nextTick((function(){var s=t.$el&&t.$el.querySelector(".el-table");s&&e.initHeaderResizeForTable(s)}))},initHeaderResizeForTable:function(e){var t=this,s=e.querySelector(".el-table__header");if(s){var a=s.querySelectorAll("th");a.forEach((function(s,a){if(!s.querySelector(".resize-handle")){s.style.position="relative";var r=document.createElement("div");r.className="resize-handle";var i=0,o=0,n=function(s){var r=s.clientX-i,n=Math.max(60,o+r);t.setColumnWidth(e,a,n)},l=function(){document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",l)};r.addEventListener("mousedown",(function(e){i=e.clientX,o=s.offsetWidth,document.addEventListener("mousemove",n),document.addEventListener("mouseup",l),e.preventDefault()})),s.appendChild(r)}}))}},setColumnWidth:function(e,t,s){var a=e.querySelector(".el-table__header colgroup"),r=e.querySelector(".el-table__body colgroup");a&&a.children[t]&&(a.children[t].style.width=s+"px"),r&&r.children[t]&&(r.children[t].style.width=s+"px")},scrollToTop:function(){var e=this.$refs.indexContainer,t=this.$refs.indexContentScroll;e&&(e.scrollTop=0),t&&(t.scrollLeft=0);try{window.scrollTo(0,0)}catch(s){}}}},g=v,w=(s("654d"),s("00f2"),s("5327"),s("de8c"),s("0c73"),s("4556"),s("411b"),s("2877")),C=Object(w["a"])(g,a,r,!1,null,"144131e5",null);t["default"]=C.exports},"5bbd":function(e,t,s){"use strict";s("85bb")},"5f5e":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"waterfall-container"},[s("div",{staticClass:"flex-layout"},e._l(e.columns,(function(t,a){return s("div",{key:"col-"+a,staticClass:"flex-column"},e._l(t,(function(t){return s("div",{key:t.index,staticClass:"item"},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[e._v(e._s(t.header))])]),e._l(t.bodyList,(function(t,a){return s("div",{key:a,staticClass:"text"},[s("a",{staticClass:"table-content",attrs:{href:"javascript:void(0)"},on:{click:function(s){return e.handleStart(t)}}},[e._v(e._s(t.processName))])])}))],2)],1)})),0)})),0)])},r=[],i=(s("14d9"),s("d3b7"),s("0643"),s("4e3e"),s("159b"),s("fef2")),o={name:"WaterfallLayout",data:function(){return{items:[],columns:[[],[],[]]}},created:function(){this.getCategoryList()},methods:{getCategoryList:function(){var e=this;Object(i["g"])().then((function(t){var s=t.data;s&&(s.forEach((function(t){var s=t.definitionVoList?t.definitionVoList.length:0;if(s>0){var a={header:t.categoryName,bodyList:t.definitionVoList,width:100,height:4*s+10};e.items.push(a)}})),e.distributeItems())}))},distributeItems:function(){var e=this;this.columns=[[],[],[]],this.items.forEach((function(t,s){e.columns[s%3].push(t)}))},handleStart:function(e){var t=this;Object(i["i"])(e.processKey).then((function(e){var s=e.data;s&&t.$router.push({path:"/workflow/process/start/"+s.deploymentId,query:{definitionId:s.definitionId}})}))}}},n=o,l=(s("2396"),s("2877")),c=Object(l["a"])(n,a,r,!1,null,"396db80d",null);t["default"]=c.exports},"654d":function(e,t,s){"use strict";s("2439")},"686e":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"waterfall-container"},[s("div",{staticClass:"flex-layout"},[0==e.processCenter.length?s("div",{staticStyle:{"font-size":"15px !important"}},[e._v(" 暂无数据 ")]):e._e(),e._l(e.columns,(function(t,a){return s("div",{key:"col-"+a,staticClass:"flex-column"},e._l(t,(function(t){return s("div",{key:t.index,staticClass:"item"},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",staticStyle:{cursor:"pointer"},attrs:{slot:"header"},on:{click:function(s){return e.handleStart(t.categoryCode,"")}},slot:"header"},[s("span",[e._v(e._s(t.header)+" ("+e._s(t.categoryCount)+")")])]),"forward"===e.centerType?e._l(t.bodyList,(function(t,a){return s("div",{key:a,staticClass:"text"},[s("a",{staticClass:"table-content",attrs:{href:"javascript:void(0)"},on:{click:function(s){return e.handleStart(t.categoryCode,t.processKey)}}},[e._v(e._s(t.processName)+"（"+e._s(t.todoCount)+"/"+e._s(t.processCount)+"）")])])})):e._l(t.bodyList,(function(t,a){return s("div",{key:a,staticClass:"text"},[s("a",{staticClass:"table-content",attrs:{href:"javascript:void(0)"},on:{click:function(s){return e.handleStart(t.categoryCode,t.processKey)}}},[e._v(e._s(t.processName)+"（"+e._s(t.processCount)+"）")])])}))],2)],1)})),0)}))],2)])},r=[],i=(s("14d9"),s("d3b7"),s("0643"),s("4e3e"),s("159b"),s("b775"));function o(e){return Object(i["a"])({url:"/flowable/processCenter/listAllMy",method:"get",params:e})}var n={name:"processCenter",props:{centerType:{type:String,default:""}},data:function(){return{items:[],columns:[[],[]],processCenter:[]}},created:function(){},methods:{getCategoryList:function(){var e=this,t={centerType:this.centerType};o(t).then((function(t){var s=t.data;s&&(e.items=[],e.columns=[[],[]],e.processCenter=[],s.forEach((function(t){var s=t.categoryBody.processMapList?t.categoryBody.processMapList.length:0;if(s>0){var a={header:t.categoryName,categoryCode:t.categoryCode,bodyList:t.categoryBody.processMapList,categoryCount:t.categoryBody.categoryCount,width:100,height:4*s+10};e.items.push(a)}})),e.processCenter=s,e.distributeItems())}))},distributeItems:function(){var e=this;this.columns=[[],[]],this.items.forEach((function(t,s){e.columns[s%2].push(t)}))},handleStart:function(e,t){var s={categoryCode:e,processKey:t};this.$emit("switch-to-tab",this.centerType,s)}}},l=n,c=(s("5bbd"),s("2877")),u=Object(c["a"])(l,a,r,!1,null,"06c09b36",null);t["default"]=u.exports},"6a48":function(e,t,s){},"71ce":function(e,t,s){},"7c47":function(e,t,s){},"7dee":function(e,t,s){},"85bb":function(e,t,s){},"8b29":function(e,t,s){"use strict";s.d(t,"d",(function(){return r})),s.d(t,"c",(function(){return i})),s.d(t,"a",(function(){return o})),s.d(t,"e",(function(){return n})),s.d(t,"b",(function(){return l}));var a=s("b775");function r(e){return Object(a["a"])({url:"/system/notice/list",method:"get",params:e})}function i(e){return Object(a["a"])({url:"/system/notice/"+e,method:"get"})}function o(e){return Object(a["a"])({url:"/system/notice",method:"post",data:e})}function n(e){return Object(a["a"])({url:"/system/notice",method:"put",data:e})}function l(e){return Object(a["a"])({url:"/system/notice/"+e,method:"delete"})}},"9a9d":function(e,t,s){"use strict";s.d(t,"c",(function(){return r})),s.d(t,"a",(function(){return i})),s.d(t,"d",(function(){return o})),s.d(t,"i",(function(){return n})),s.d(t,"h",(function(){return l})),s.d(t,"f",(function(){return c})),s.d(t,"b",(function(){return u})),s.d(t,"g",(function(){return d})),s.d(t,"e",(function(){return p}));var a=s("b775");function r(e){return Object(a["a"])({url:"/flowable/task/complete",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/flowable/task/complete/allApproval",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/flowable/task/delegate",method:"post",data:e})}function n(e){return Object(a["a"])({url:"/flowable/task/transfer",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/flowable/task/return",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/flowable/task/reject",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/flowable/task/claim",method:"post",data:e})}function d(e){return Object(a["a"])({url:"/flowable/task/returnList",method:"post",data:e})}function p(e){return Object(a["a"])({url:"/flowable/task/forward",method:"post",data:e})}},"9c3a":function(e,t,s){},b48d:function(e,t,s){"use strict";s("7c47")},bebd:function(e,t,s){"use strict";s("7dee")},c4c5:function(e,t,s){},c70f:function(e,t,s){},cb3e:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px",size:e.searchSize}},[s("el-form-item",{attrs:{label:"流程编号",prop:"processCode"}},[s("el-input",{attrs:{placeholder:"请输入流程编号",clearable:"",size:e.searchSize},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.queryParams.processCode,callback:function(t){e.$set(e.queryParams,"processCode",t)},expression:"queryParams.processCode"}})],1),s("el-form-item",{attrs:{label:"流程分类",prop:"category"}},[s("el-select",{attrs:{placeholder:"请选择流程分类",clearable:"",size:e.searchSize},on:{change:e.getProcessList},model:{value:e.queryParams.category,callback:function(t){e.$set(e.queryParams,"category",t)},expression:"queryParams.category"}},e._l(e.categoryOptions,(function(e){return s("el-option",{key:e.categoryId,attrs:{label:e.categoryName,value:e.code}})})),1)],1),s("el-form-item",{attrs:{label:"工作流",prop:"processKey"}},[s("el-select",{attrs:{placeholder:"请选择工作流",clearable:"",size:e.searchSize},model:{value:e.queryParams.processKey,callback:function(t){e.$set(e.queryParams,"processKey",t)},expression:"queryParams.processKey"}},e._l(e.processOptions,(function(e){return s("el-option",{key:e.processKey,attrs:{label:e.processName,value:e.processKey}})})),1)],1),s("el-form-item",{attrs:{label:"开始日期",prop:"beginTime","label-width":"80px"}},[s("el-date-picker",{staticStyle:{width:"150px"},attrs:{size:e.searchSize,"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"审批开始时间"},model:{value:e.queryParams.beginTime,callback:function(t){e.$set(e.queryParams,"beginTime",t)},expression:"queryParams.beginTime"}})],1),s("el-form-item",{attrs:{label:"截止日期",prop:"endTime","label-width":"80px"}},[s("el-date-picker",{staticStyle:{width:"150px"},attrs:{size:e.searchSize,"value-format":"yyyy-MM-dd",type:"date",placeholder:"审批截止时间"},on:{change:e.endTimeChanged},model:{value:e.queryParams.endTime,callback:function(t){e.$set(e.queryParams,"endTime",t)},expression:"queryParams.endTime"}})],1),s("el-form-item",{attrs:{label:"发起人",prop:"startUserName"}},[s("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入发起人",size:e.searchSize},on:{change:e.startUserChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.queryParams.startUserName,callback:function(t){e.$set(e.queryParams,"startUserName",t)},expression:"queryParams.startUserName"}},[s("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){e.perSelOpen=!0}},slot:"append"})],1)],1),s("el-form-item",[s("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),s("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),e.inTab?e._e():s("el-row",{staticClass:"mb8",attrs:{gutter:10}},[s("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.finishedList,border:"","cell-class-name":e.uniformCellClass},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{label:"流程编号",align:"left",prop:"processCode",width:"260"}}),s("el-table-column",{attrs:{label:"流程标题",align:"left",prop:"processTitle"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{on:{click:function(s){return e.handleFlowRecord(t.row)}}},[t.row.processTitle?s("label",{staticClass:"row-title title-cursor"},[e._v(e._s(t.row.processTitle))]):s("label",{staticClass:"row-title title-cursor"},[e._v(e._s(t.row.procDefName)+" - "+e._s(t.row.startUserName)+" - "+e._s(t.row.createTime.substring(0,10)))])])]}}])}),s("el-table-column",{attrs:{label:"流程发起人",align:"left",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("label",{staticClass:"row-title"},[e._v(e._s(t.row.startUserName))])]}}])}),s("el-table-column",{attrs:{label:"接收时间",align:"left",prop:"createTime",width:"160"}}),s("el-table-column",{attrs:{label:"审批时间",align:"left",prop:"finishTime",width:"160"}}),s("el-table-column",{attrs:{label:"流程状态",align:"left",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("dict-tag",{attrs:{options:e.dict.type.wf_process_status,value:t.row.processStatus}})]}}])})],1),s("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),s("el-dialog",{attrs:{title:"选择人员",visible:e.perSelOpen,width:"70vw"},on:{"update:visible":function(t){e.perSelOpen=t}}},[s("person-selector",{ref:"PersonSelector",attrs:{isSingle:!0}}),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:e.personSelectorSave}},[e._v("确 定")]),s("el-button",{on:{click:function(t){e.perSelOpen=!1}}},[e._v("取 消")])],1)],1)],1)},r=[],i=s("5530"),o=(s("d81d"),s("14d9"),s("d3b7"),s("0643"),s("a573"),s("ca94")),n=s("b775");function l(e){return Object(n["a"])({url:"/flowable/task/revokeProcess",method:"post",data:e})}var c=s("fef2"),u=(s("9a9d"),s("96bd"),{name:"Finished",dicts:["wf_process_status"],components:{},props:{inTab:{type:Boolean,default:!1}},data:function(){return{loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,categoryOptions:[],processOptions:[],finishedList:[],title:"",open:!1,src:"",queryParams:{pageNum:1,pageSize:10,processCode:null,processKey:null,name:null,category:null,key:null,tenantId:null,deployTime:null,derivedFrom:null,derivedFromRoot:null,parentDeploymentId:null,engineVersion:null,startUserName:null,startUserId:null,beginTime:void 0,endTime:void 0},form:{},rules:{},perSelOpen:!1}},computed:{searchSize:function(){return this.inTab?"mini":"small"}},created:function(){},beforeRouteEnter:function(e,t,s){s((function(e){}))},activated:function(){},methods:{initWithParams:function(e){var t=this;this.getCategoryList(),this.queryParams.category=e.categoryCode,this.queryParams.processKey=e.processKey,Object(o["n"])({category:this.queryParams.category,pageNum:1,pageSize:99999}).then((function(e){t.processOptions=e.data})),this.getList()},uniformCellClass:function(){return"uniform-cell"},getCategoryList:function(){var e=this;Object(c["f"])().then((function(t){return e.categoryOptions=t.data}))},getProcessList:function(){var e=this;this.queryParams.processKey="",Object(o["n"])({category:this.queryParams.category,pageNum:1,pageSize:99999}).then((function(t){e.processOptions=t.data}))},getList:function(){var e=this;this.loading=!0,Object(o["k"])(this.queryParams).then((function(t){e.finishedList=t.rows,e.total=t.total,e.loading=!1}))},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,name:null,category:null,key:null,tenantId:null,deployTime:null,derivedFrom:null,derivedFromRoot:null,parentDeploymentId:null,engineVersion:null},this.resetForm("form")},setIcon:function(e){return e?"el-icon-check":"el-icon-time"},setColor:function(e){return e?"#2bc418":"#b3bdbb"},endTimeChanged:function(e){e&&(this.queryParams.endTime="".concat(e," 23:59:59"))},startUserChange:function(){this.queryParams.startUserId=void 0},personSelectorSave:function(){var e=this.$refs["PersonSelector"].getSelectedNodes();if(void 0!==e){var t=e.userId,s=e.nickName;this.queryParams.startUserName=s,this.queryParams.startUserId=t,this.perSelOpen=!1,this.handleQuery()}},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.processOptions=[],this.queryParams.startUserId=null,this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length},handleAdd:function(){this.reset(),this.open=!0,this.title="添加流程定义"},handleFlowRecord:function(e){var t=e.procDefId.split(":")[0];this.$router.push({path:"/workflow/process/detail/"+e.procInsId,query:{processed:!1,procDefId:t,processCode:e.processCode}})},handleRevoke:function(e){var t=this,s={procInsId:e.procInsId,taskId:e.taskId};l(s).then((function(e){t.$modal.msgSuccess(e.msg),t.getList()}))},handleExport:function(){this.download("flowable/process/finishedExport",Object(i["a"])({},this.queryParams),"wf_finished_process_".concat((new Date).getTime(),".xlsx"))}}}),d=u,p=(s("349e"),s("2877")),h=Object(p["a"])(d,a,r,!1,null,"4c87a172",null);t["default"]=h.exports},de8c:function(e,t,s){"use strict";s("71ce")},e2a3:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,size:e.searchSize,inline:!0,"label-width":"68px"}},[s("el-form-item",{attrs:{label:"流程编号",prop:"processCode"}},[s("el-input",{attrs:{placeholder:"请输入流程编号",clearable:"",size:e.searchSize},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.queryParams.processCode,callback:function(t){e.$set(e.queryParams,"processCode",t)},expression:"queryParams.processCode"}})],1),s("el-form-item",{attrs:{label:"流程分类",prop:"category"}},[s("el-select",{attrs:{placeholder:"请选择流程分类",clearable:"",size:e.searchSize},on:{change:e.getProcessList},model:{value:e.queryParams.category,callback:function(t){e.$set(e.queryParams,"category",t)},expression:"queryParams.category"}},e._l(e.categoryOptions,(function(e){return s("el-option",{key:e.categoryId,attrs:{label:e.categoryName,value:e.code}})})),1)],1),s("el-form-item",{attrs:{label:"工作流",prop:"processKey"}},[s("el-select",{attrs:{placeholder:"请选择工作流",clearable:"",size:e.searchSize},model:{value:e.queryParams.processKey,callback:function(t){e.$set(e.queryParams,"processKey",t)},expression:"queryParams.processKey"}},e._l(e.processOptions,(function(e){return s("el-option",{key:e.processKey,attrs:{label:e.processName,value:e.processKey}})})),1)],1),s("el-form-item",{attrs:{label:"开始日期",prop:"beginTime","label-width":"80px"}},[s("el-date-picker",{staticStyle:{width:"150px"},attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"抄送开始时间",size:e.searchSize},model:{value:e.queryParams.beginTime,callback:function(t){e.$set(e.queryParams,"beginTime",t)},expression:"queryParams.beginTime"}})],1),s("el-form-item",{attrs:{label:"截止日期",prop:"endTime","label-width":"80px"}},[s("el-date-picker",{staticStyle:{width:"150px"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"抄送截止时间",size:e.searchSize},on:{change:e.endTimeChanged},model:{value:e.queryParams.endTime,callback:function(t){e.$set(e.queryParams,"endTime",t)},expression:"queryParams.endTime"}})],1),s("el-form-item",{attrs:{label:"发起人",prop:"originatorName"}},[s("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入发起人"},on:{change:e.startUserChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.queryParams.originatorName,callback:function(t){e.$set(e.queryParams,"originatorName",t)},expression:"queryParams.originatorName"}},[s("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){e.perSelOpen=!0}},slot:"append"})],1)],1),s("el-form-item",[s("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),s("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),e.inTab?e._e():s("el-row",{staticClass:"mb8",attrs:{gutter:10}},[s("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.copyList,border:"","cell-class-name":e.uniformCellClass},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{label:"流程编号",align:"left",prop:"processCode",width:"260"}}),s("el-table-column",{attrs:{label:"流程标题",align:"left",prop:"processTitle"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{on:{click:function(s){return e.handleFlowRecord(t.row)}}},[t.row.processTitle?s("label",{staticClass:"row-title title-cursor"},[e._v(e._s(t.row.processTitle))]):s("label",{staticClass:"row-title title-cursor"},[e._v(e._s(t.row.processName)+" - "+e._s(t.row.originatorName)+" - "+e._s(t.row.createTime.substring(0,10)))])])]}}])}),s("el-table-column",{attrs:{label:"发起人",align:"left",prop:"originatorName",width:"160"}}),s("el-table-column",{attrs:{label:"抄送时间",align:"left",prop:"createTime",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(e.parseTime(t.row.createTime)))])]}}])})],1),s("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),s("el-dialog",{attrs:{title:"选择人员",visible:e.perSelOpen,width:"70vw"},on:{"update:visible":function(t){e.perSelOpen=t}}},[s("person-selector",{ref:"PersonSelector",attrs:{isSingle:!0}}),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:e.personSelectorSave}},[e._v("确 定")]),s("el-button",{on:{click:function(t){e.perSelOpen=!1}}},[e._v("取 消")])],1)],1)],1)},r=[],i=s("5530"),o=(s("d81d"),s("14d9"),s("d3b7"),s("0643"),s("a573"),s("ca94")),n=s("fef2"),l=(s("96bd"),{name:"Copy",props:{inTab:{type:Boolean,default:!1}},data:function(){return{buttonLoading:!1,loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,categoryOptions:[],processOptions:[],copyList:[],queryParams:{pageNum:1,pageSize:10,processId:void 0,processCode:void 0,processKey:void 0,category:void 0,categoryId:void 0,taskId:void 0,userId:void 0,originatorName:void 0,originatorId:void 0,name:void 0,beginTime:void 0,endTime:void 0},perSelOpen:!1}},computed:{searchSize:function(){return this.inTab?"mini":"small"}},created:function(){},activated:function(){},methods:{initWithParams:function(e){var t=this;this.getCategoryList(),this.queryParams.category=e.categoryCode,this.queryParams.processKey=e.processKey,Object(o["n"])({category:this.queryParams.category,pageNum:1,pageSize:99999}).then((function(e){t.processOptions=e.data})),this.getList()},uniformCellClass:function(){return"uniform-cell"},getCategoryList:function(){var e=this;Object(n["f"])().then((function(t){return e.categoryOptions=t.data}))},getProcessList:function(){var e=this;this.queryParams.processKey="",Object(o["n"])({category:this.queryParams.category,pageNum:1,pageSize:99999}).then((function(t){e.processOptions=t.data}))},getList:function(){var e=this;this.loading=!0,Object(o["j"])(this.queryParams).then((function(t){e.copyList=t.rows,e.total=t.total,e.loading=!1}))},endTimeChanged:function(e){e&&(this.queryParams.endTime="".concat(e," 23:59:59"))},startUserChange:function(){this.queryParams.originatorId=void 0},personSelectorSave:function(){var e=this.$refs["PersonSelector"].getSelectedNodes();if(void 0!==e){var t=e.userId,s=e.nickName;this.queryParams.originatorName=s,this.queryParams.originatorId=t,this.perSelOpen=!1,this.handleQuery()}},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.processOptions=[],this.queryParams.originatorId=null,this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.copyId})),this.single=1!==e.length,this.multiple=!e.length},handleFlowRecord:function(e){console.log(e);var t=e.processId.split(":")[0];this.$router.push({path:"/workflow/process/detail/"+e.instanceId,query:{processed:!1,procDefId:t,processCode:e.processCode}})},handleExport:function(){this.download("flowable/process/copyExport",Object(i["a"])({},this.queryParams),"wf_copy_process_".concat((new Date).getTime(),".xlsx"))}}}),c=l,u=(s("b48d"),s("2877")),d=Object(u["a"])(c,a,r,!1,null,"2d4092a0",null);t["default"]=d.exports},fa8c:function(e,t,s){},fd90:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px",size:e.searchSize}},[e._e(),s("el-form-item",{attrs:{label:"流程编号",prop:"processCode"}},[s("el-input",{attrs:{placeholder:"请输入流程编号",clearable:"",size:e.searchSize},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.queryParams.processCode,callback:function(t){e.$set(e.queryParams,"processCode",t)},expression:"queryParams.processCode"}})],1),s("el-form-item",{attrs:{label:"流程分类",prop:"category"}},[s("el-select",{attrs:{clearable:"",placeholder:"请选择",size:e.searchSize},on:{change:e.getProcessList},model:{value:e.queryParams.category,callback:function(t){e.$set(e.queryParams,"category",t)},expression:"queryParams.category"}},e._l(e.categoryOptions,(function(e){return s("el-option",{key:e.categoryId,attrs:{label:e.categoryName,value:e.code}})})),1)],1),s("el-form-item",{attrs:{label:"工作流",prop:"processKey"}},[s("el-select",{attrs:{clearable:"",placeholder:"请选择",size:e.searchSize},model:{value:e.queryParams.processKey,callback:function(t){e.$set(e.queryParams,"processKey",t)},expression:"queryParams.processKey"}},e._l(e.processOptions,(function(e){return s("el-option",{key:e.processKey,attrs:{label:e.processName,value:e.processKey}})})),1)],1),s("el-form-item",{attrs:{label:"开始日期",prop:"beginTime","label-width":"80px"}},[s("el-date-picker",{staticStyle:{width:"150px"},attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"提交时间",size:e.searchSize},model:{value:e.queryParams.beginTime,callback:function(t){e.$set(e.queryParams,"beginTime",t)},expression:"queryParams.beginTime"}})],1),s("el-form-item",{attrs:{label:"截止日期",prop:"endTime","label-width":"80px"}},[s("el-date-picker",{staticStyle:{width:"150px"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"提交时间",size:e.searchSize},on:{change:e.endTimeChanged},model:{value:e.queryParams.endTime,callback:function(t){e.$set(e.queryParams,"endTime",t)},expression:"queryParams.endTime"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),s("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),e.inTab?e._e():s("el-row",{staticClass:"mb8",attrs:{gutter:10}},[s("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.ownProcessList,border:"","cell-class-name":e.uniformCellClass},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{label:"流程编号",align:"left",prop:"processCode",width:"260"}}),s("el-table-column",{attrs:{label:"流程标题",align:"left",prop:"processTitle"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{on:{click:function(s){return e.handleFlowRecord(t.row)}}},[t.row.processTitle?s("label",{staticClass:"row-title title-cursor"},[e._v(e._s(t.row.processTitle))]):s("label",{staticClass:"row-title title-cursor"},[e._v(e._s(t.row.procDefName)+" - "+e._s(t.row.startUserName)+" - "+e._s(t.row.createTime.substring(0,10)))])])]}}])}),s("el-table-column",{attrs:{label:"当前节点",align:"left",prop:"taskName","show-overflow-tooltip":"",width:"240"}}),s("el-table-column",{attrs:{label:"提交时间",align:"left",prop:"createTime",width:"160"}}),s("el-table-column",{attrs:{label:"流程状态",align:"left",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("dict-tag",{attrs:{options:e.dict.type.wf_process_status,value:t.row.processStatus}})]}}])}),s("el-table-column",{attrs:{label:"操作",align:"left","class-name":"small-padding fixed-width",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return["canceled"==t.row.processStatus?s("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["flowable:process:remove"],expression:"['flowable:process:remove']"}],attrs:{type:"text",size:"mini",icon:"el-icon-delete"},on:{click:function(s){return e.handleDelete(t.row)}}},[e._v("删除")]):e._e(),"running"==t.row.processStatus&&t.row.stoppable?s("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["flowable:process:cancel"],expression:"['flowable:process:cancel']"}],attrs:{type:"text",size:"mini",icon:"el-icon-circle-close"},on:{click:function(s){return e.handleStop(t.row)}}},[e._v("结束")]):e._e(),s("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["flowable:process:exportForm"],expression:"['flowable:process:exportForm']"}],attrs:{type:"text",size:"mini",icon:"el-icon-download"},on:{click:function(s){return e.handleExportFormData(t.row)}}},[e._v("导出表单")])]}}])})],1),s("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1)},r=[],i=s("5530"),o=(s("7db0"),s("d81d"),s("14d9"),s("d3b7"),s("0643"),s("fffc"),s("a573"),s("ca94")),n=s("fef2"),l=(s("9a9d"),s("96bd"),{name:"Own",dicts:["wf_process_status"],components:{},props:{inTab:{type:Boolean,default:!1}},data:function(){return{loading:!0,processLoading:!0,ids:[],codes:[],single:!0,multiple:!0,showSearch:!0,total:0,categoryOptions:[],processOptions:[],processTotal:0,ownProcessList:[],title:"",open:!1,src:"",definitionList:[],queryParams:{pageNum:1,pageSize:10,processKey:void 0,processCode:void 0,category:void 0,name:void 0,beginTime:void 0,endTime:void 0},form:{},rules:{}}},computed:{searchSize:function(){return this.inTab?"mini":"small"},userId:function(){return this.$store.state.user.uid}},created:function(){},beforeRouteEnter:function(e,t,s){s((function(e){}))},activated:function(){},methods:{initWithParams:function(e){var t=this;this.getCategoryList(),this.queryParams.category=e.categoryCode,this.queryParams.processKey=e.processKey,Object(o["n"])({category:this.queryParams.category,pageNum:1,pageSize:99999}).then((function(e){t.processOptions=e.data})),this.getList()},uniformCellClass:function(){return"uniform-cell"},getCategoryList:function(){var e=this;Object(n["f"])().then((function(t){return e.categoryOptions=t.data}))},getProcessList:function(){var e=this;this.queryParams.processKey="",Object(o["n"])({category:this.queryParams.category,pageNum:1,pageSize:99999}).then((function(t){e.processOptions=t.data}))},getList:function(){var e=this;this.loading=!0,Object(o["l"])(this.queryParams).then((function(t){e.ownProcessList=t.rows,e.total=t.total,e.loading=!1}))},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,name:null,category:null,key:null,tenantId:null,deployTime:null,derivedFrom:null,derivedFromRoot:null,parentDeploymentId:null,engineVersion:null},this.resetForm("form")},endTimeChanged:function(e){e&&(this.queryParams.endTime="".concat(e," 23:59:59"))},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.processOptions=[],this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.procInsId})),this.codes=e.map((function(e){return e.processCode})),this.single=1!==e.length,this.multiple=!e.length},handleAgain:function(e){this.$router.push({path:"/workflow/process/start/"+e.deployId,query:{definitionId:e.procDefId,procInsId:e.procInsId}}),console.log(e)},handleStop:function(e){var t=this,s={procInsId:e.procInsId};this.$modal.confirm('是否结束编号为"'+e.processCode+'"的流程？').then((function(){t.loading=!0,Object(o["u"])(s).then((function(e){t.$modal.msgSuccess(e.msg),t.getList(),t.loading=!1}))}))},handleFlowRecord:function(e){var t=e.procDefId.split(":")[0],s={processed:!1,procDefId:t,processCode:e.processCode};e.taskId&&(s.taskId=e.taskId,s.processed=!0),this.$router.push({path:"/workflow/process/detail/"+e.procInsId,query:s})},handleDelete:function(e){var t=this,s=e.procInsId||this.ids,a=e.processCode||this.codes;this.$confirm('是否确认删除流程编号为"'+a+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["c"])(s)})).then((function(){t.getList(),t.$modal.msgSuccess("删除成功")}))},handleExport:function(){this.download("flowable/process/ownExport",Object(i["a"])({},this.queryParams),"wf_own_process_".concat((new Date).getTime(),".xlsx"))},categoryFormat:function(e,t){var s,a;return null!==(s=null===(a=this.categoryOptions.find((function(t){return t.code===e.category})))||void 0===a?void 0:a.categoryName)&&void 0!==s?s:""},handleExportFormData:function(e){this.download("flowable/process/export/".concat(e.procInsId),{},"wf_own_process_".concat((new Date).getTime(),".xlsx"))}}}),c=l,u=(s("3392"),s("2877")),d=Object(u["a"])(c,a,r,!1,null,"79997ef1",null);t["default"]=d.exports},ff15:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("oa-flow",{ref:"oaFlow",attrs:{"in-tab":e.inTab}})],1)},r=[],i=s("791f"),o={name:"Todo",components:{OaFlow:i["a"]},props:{inTab:{type:Boolean,default:!1}},data:function(){return{}},computed:{searchSize:function(){return this.inTab?"mini":"small"}},mounted:function(){this.inTab||this.$refs["oaFlow"].init()},methods:{}},n=o,l=s("2877"),c=Object(l["a"])(n,a,r,!1,null,null,null);t["default"]=c.exports}}]);